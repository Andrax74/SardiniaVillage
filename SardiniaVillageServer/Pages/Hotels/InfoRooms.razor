@page "/info"

@using Models;
@using SardiniaVillageServer.Pages.Hotels.Components;
@using SardiniaVillageServer.Data
@inject RoomsService roomsService

<h2 class="bg-light border p-2">
    Info Stanze
</h2>

<TestChildComp maxlength="5" Required="Required" PlaceHolder="Descrizione Stanza 2" Intestazione="Ricerca Stanze"></TestChildComp>

<div class="row">
    @foreach (var Myroom in RoomList)
    {
        <div class="roomCard">
            <Room room=Myroom OnRoomClick="BookRoom">
                <ChildContent>@((Myroom.IsFree) ? "Libera" : "Occupata")</ChildContent>
                <InfoScadenza>@((Myroom.IsFree) ? "" : "sino al 15/06/21")</InfoScadenza>
            </Room>
        </div>
    }
</div>

@if (@BookedRoom != null)
{
    <span>Hai prenotato la stanza @BookedRoom.Description</span>
}


@code {

    public Rooms BookedRoom { get; set; }

    List<Rooms> RoomList;

    protected override void OnInitialized()
    {
        base.OnInitialized();

        RoomList = roomsService.GetRooms();

    }

    protected void BookRoom(int idRoom)
    {
        this.BookedRoom = this.RoomList.Where(e => e.Id == idRoom).First();

        //this.BookedRoom = room;

    }

}
